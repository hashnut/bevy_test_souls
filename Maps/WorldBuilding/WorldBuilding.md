# 월드 컨셉: 부서진 왕관과 중력 역병 (The Shattered Crown and Gravity Blight)

## 월드 배경
고대 산악 왕국은 하늘에 떠 있는 거대한 수정 모노리스('왕관')의 힘으로 번영했습니다. 그러나 '왕관'이 산산조각 나면서 그 파편들이 왕국 전역에 추락했습니다. 이 파편들은 중력 이상 현상과 생명체를 서서히 수정으로 만드는 '수정 역병'을 일으켰고, 왕국은 뒤틀린 채 몰락했습니다. 플레이어는 재앙의 근원인 맵 중앙 상공의 '왕관의 심장부'로 향해야 합니다.

## 소울라이크 맵 디자인 핵심 원칙 (4km x 4km 적용)

### 1. 랜드마크 기반 내비게이션
맵 중앙 상공에 떠 있는 '부서진 왕관'의 잔해를 대부분의 지역에서 볼 수 있게 하여, 플레이어에게 방향성과 최종 목표를 제시합니다.

### 2. 극단적인 수직성 (Verticality)
산악 지형과 중력 이상 현상(떠 있는 섬, 깊은 협곡)을 활용하여 Z축(높이)을 적극적으로 사용합니다.

### 3. 유기적 연결성 (Interconnectivity) 및 숏컷
멀리 떨어진 구역이 예상치 못한 방식(중력 리프트, 고대 승강기, 숨겨진 동굴 통로)으로 연결되어 탐험의 깊이를 더합니다.

### 4. 환경 스토리텔링
부서진 구조물, 수정화된 시체, 특정 장소에 집중된 파편 등을 통해 세계의 비극을 대사 없이 시각적으로 전달합니다.

### 5. 긴장, 위험, 그리고 보상
체크포인트('왕관의 잔재') 배치는 전략적이어야 하며, 위험한 탐험 끝에는 확실한 보상(장비, 숏컷 개방)이 주어져야 합니다.

## 월드 구획 청사진 (4km x 4km Blueprint)

월드는 중앙의 재앙의 근원지를 중심으로 6개의 주요 구역으로 나뉩니다.

```mermaid
graph TD
    subgraph 4km x 4km Map
    A[Z1. 순례자의 오르막길<br>(남쪽, 시작 지점)] --> B[Z3. 가라앉은 도시 에델<br>(남서쪽, 시가지)];
    A --> C[Z2. 수정화된 숲<br>(남동쪽, 변이 지대)];
    B -- 지하 수로 (숨겨진 길) --> D[Z4. 중력 이상 광산<br>(북서쪽, 산업 지대)];
    C -- 협곡 통로 --> E[Z5. 황금빛 요새<br>(북동쪽, 레거시 던전)];
    D --> F(Z6. 왕관의 심장부<br>(중앙 상공, 최종 지역));
    E --> F;
    B -- 고대 대승강기 (숏컷) --> E;
    end
```

## 구획별 상세 씬 구성 및 오브젝트 배치 플랜

### Z1. 순례자의 오르막길 (The Pilgrim's Ascent) - 시작 지점
**컨셉:** 왕국 외부에서 '왕관'으로 향하던 험준한 산길. 튜토리얼 지역.

**크기:** 약 1km x 1km (남쪽)

**분위기:** 황량함, 안개 자욱함, 몰락의 서막.

#### 오브젝트 배치 플랜:

**각성의 동굴 (시작점):**
- 배치: 부서진 순례자 석상, 오래된 횃불, 버려진 야영 흔적 배치. 동굴을 나서자마자 멀리 떠 있는 '부서진 왕관(Z6)'과 '황금빛 요새(Z5)'가 보이도록 시야를 설계하여 압도적인 스케일 제시.

**위태로운 절벽길:**
- 배치: 좁은 산길을 따라 마른 나무와 바위 배치. 한쪽은 낭떠러지로 만들어 낙사에 대한 긴장감을 초반부터 교육. 약한 적(쇠약한 순례자)을 배치하여 기본 전투 학습.

**검문소 폐허:**
- 오브젝트: 무너진 망루, 녹슨 철문, 바리케이드 잔해. 첫 번째 체크포인트.
- 배치: 바리케이드를 엄폐물로 활용하도록 유도. 망루 위에 원거리 적 배치. 철문을 여는 레버를 통해 기믹 상호작용 경험 제공. Z2와 Z3로 가는 갈림길이 존재.

### Z2. 수정화된 숲 (The Crystalized Forest)
**컨셉:** 왕관 파편의 영향으로 식물과 생물이 수정으로 변이된 숲.

**크기:** 약 1.5km x 1km (남동쪽)

**분위기:** 기괴한 아름다움, 정적, 마법적 위험. 푸른색/보라색 발광.

#### 오브젝트 배치 플랜:

**수정 나무 군락:**
- 오브젝트: 반투명한 수정 재질의 거목, 발광하는 식물.
- 배치: 나무를 빽빽하게 배치하여 시야 제한 및 미로 형성. 빛이 수정에 반사/굴절되는 시각 효과 강조.

**소음 함정 지대:**
- 오브젝트: 바닥에 깔린 날카로운 수정 파편.
- 배치: 특정 구간에 수정 파편을 깔아, 밟으면 소음이 발생하여 주변의 적(수정 늑대 등 빠르지만 시야가 좁은 적)을 유인하도록 설계. 은신 및 어그로 관리 플레이 유도.

**파편 추락지 (미니 보스 구역):**
- 오브젝트: 중앙에 박힌 거대한 왕관 파편. 주변에 수정화가 진행 중인 거대 짐승의 사체.
- 배치: 파편 주변에서 주기적으로 에너지 파동 발생(환경 위험 요소). 미니 보스는 파편의 에너지를 흡수한 괴수.

### Z3. 가라앉은 도시 에델 (The Sunken City of Aethel)
**컨셉:** 지반 침하로 인해 절반이 호수에 잠긴 고대 도시. 극단적인 수직 탐험이 핵심.

**크기:** 약 1.5km x 1.5km (남서쪽)

**분위기:** 몰락한 웅장함, 습함, 고딕 양식의 폐허.

#### 오브젝트 배치 플랜:

**지붕 및 첨탑 경로:**
- 오브젝트: 기울어진 첨탑, 부서진 다리, 건물 잔해, 가고일 석상(일부는 살아 움직임).
- 배치: 플레이어의 주 이동 경로를 건물 지붕과 무너진 다리로 설정. 낙사 위험과 점프 구간 다수 배치. 첨탑에는 저격수형 적 배치.

**침수된 광장:**
- 오브젝트: 물에 잠긴 거대 동상, 떠다니는 잔해(나무 상자, 부서진 가판대).
- 배치: 물속에서는 이동 속도 저하. 물속에 숨어있다 기습하는 수중 적 배치.

**대성당 (내부 던전 및 숏컷):**
- 오브젝트: 거대한 스테인드글라스, 무너진 샹들리에, 파이프 오르간.
- 배치: 도시의 랜드마크. 내부는 복층 구조. 샹들리에를 떨어뜨려 길을 만들거나 적을 처치하는 기믹 활용. 성당 최하층(지하 묘지)에는 Z5(황금빛 요새) 하부로 연결되는 고대 대승강기(거대 숏컷) 배치.

### Z4. 중력 이상 광산 (The Gravity-Defying Mines)
**컨셉:** 왕관의 동력을 채굴하던 광산. 파편의 영향으로 중력이 뒤틀려 바위와 구조물이 공중에 떠다님.

**크기:** 약 1km x 1.5km (북서쪽)

**분위기:** 혼돈, 산업적 황폐함, 어두움, 불안정함.

#### 오브젝트 배치 플랜:

**부유하는 채굴 현장:**
- 오브젝트: 공중에 떠 있는 거대한 바위, 끊어진 광차 레일, 버려진 채굴 장비, 나무 비계.
- 배치: 떠 있는 바위들을 발판 삼아 이동하는 플랫포밍 요소 강조. Z3의 지하 수로를 통해 이곳의 하부로 진입 가능.

**중력 제어 장치:**
- 오브젝트: 거대한 기계 장치, 에너지 코어.
- 배치: 특정 스위치를 작동시키면 부유석의 위치가 바뀌거나, 특정 구역의 중력 방향이 바뀌어 벽이나 천장을 걸을 수 있게 되는 퍼즐 기믹 도입.

**수직 갱도:**
- 오브젝트: 깊은 수직 갱도, 고장 난 승강기 잔해.
- 배치: 낙하를 이용한 빠른 하강(Fall Control) 구간 설계. 벽면에 붙어서 공격하는 곤충형 적 배치. 최상층은 Z6(왕관의 심장부)로 향하는 중력 리프트와 연결.

### Z5. 황금빛 요새 (The Gilded Fortress) - 레거시 던전
**컨셉:** 왕국 최정예 병력의 거점. 가장 밀도 높고 복잡하며 도전적인 핵심 던전. 중력 이상으로 일부가 공중에 떠 있음.

**크기:** 약 1km x 1km (북동쪽, 고밀도 다층 구조)

**분위기:** 압도적, 위협적, 몰락한 영광.

#### 오브젝트 배치 플랜:

**외성벽 및 진입로:**
- 오브젝트: 거대한 황금빛 성벽(일부 수정화됨), 자동 방어 포탑(수정 동력), 끊어진 부유 다리.
- 배치: 진입 자체가 도전이 되도록 설계. 포탑의 공격을 피해 엄폐하며 이동. Z3에서 연결된 대승강기를 통해 요새 중턱으로 바로 진입 가능.

**병영 및 훈련소 (내부):**
- 오브젝트: 갑옷 거치대, 무기 선반, 전술 지도, 급조된 바리케이드.
- 적 배치: 강력한 정예 기사단(높은 방어력과 패턴화된 공격)이 순찰. 좁은 복도와 넓은 훈련장이 반복되어 다양한 전투 상황 연출.

**왕좌로 가는 길 및 숏컷 네트워크:**
- 오브젝트: 화려한 태피스트리, 거대한 초상화(뒤에 비밀 통로), 수동 승강기, 일방향 문.
- 배치: 복잡한 미로 구조 극대화. 멀리 돌아가야 하는 길목에 숏컷을 배치하여 돌파의 쾌감 제공. 환영 벽(Illusory Walls) 다수 배치.

### Z6. 왕관의 심장부 (The Crown's Heart) - 최종 지역
**컨셉:** 모든 재앙의 근원지. 부서진 모노리스의 중심부. 맵 중앙 상공에 위치.

**크기:** 직경 약 1km

**분위기:** 초현실적, 코스믹 호러, 웅장함.

#### 오브젝트 배치 플랜:

**파편의 소용돌이:**
- 오브젝트: 공중에 떠다니는 거대한 수정 파편들, 에너지의 흐름(VFX 강조), 고대 문명의 잔해.
- 배치: Z4의 중력 리프트와 Z5의 최상층을 통해 접근. 파편들 사이를 건너뛰며 중심으로 이동. 중력이 끊임없이 변화하여 이동 자체가 최종 시련이 됨.

**공허의 제단 (최종 보스 아레나):**
- 오브젝트: 가장 거대한 중심 핵, 빛나는 에너지 균열.
- 배치: 시각적으로 가장 압도적인 공간. 배경에는 성운과 별들이 보임. 보스전 페이즈에 따라 중력이 역전되거나 아레나가 재구성되는 동적 환경 변화 설계.

## Bevy 엔진 구현 시 기술적 고려사항

4km x 4km 규모의 맵을 Bevy로 구현하려면 최적화가 필수적입니다.

### 월드 스트리밍 및 청킹 (World Streaming & Chunking)
맵 전체를 로드할 수 없습니다. 맵을 격자(예: 256m x 256m 청크)로 나누고, 플레이어 위치에 따라 필요한 청크만 동적으로 로드/언로드해야 합니다. Bevy의 비동기 씬 스폰(Async Scene Spawning) 기능을 활용할 수 있으나, 효율적인 스트리밍을 위한 커스텀 시스템 구현이 필요할 수 있습니다.

### LOD (Level of Detail)
모든 3D 에셋(특히 건축물, 수정, 식생)에 대해 최소 3~4단계의 LOD를 설정해야 합니다. 원거리의 랜드마크는 저폴리곤 모델로 렌더링해야 합니다.

### 오클루전 컬링 (Occlusion Culling)
복잡한 도시(Z3)나 요새(Z5), 광산(Z4)에서는 다른 구조물에 가려진 오브젝트를 렌더링에서 제외하는 기술이 성능 확보에 매우 중요합니다.

### 모듈러 에셋 및 GPU 인스턴싱
건축물, 성벽, 갱도 등은 모듈러 에셋으로 제작하여 재사용성을 높여야 합니다. 나무, 바위, 잔해 등 반복되는 에셋은 GPU 인스턴싱을 사용하여 드로우 콜(Draw Call)을 최소화해야 합니다.

### 물리 및 내비게이션
bevy_rapier를 사용하여 물리 엔진을 구현할 수 있습니다. 방대한 월드에서의 물리 연산 부하를 줄이기 위해 공간 분할(Spatial Partitioning) 최적화가 필요합니다. 또한, 복잡한 수직 구조와 중력 변화 때문에 AI 이동을 위한 내비게이션 메시 생성이 까다로울 수 있으므로 bevy_pathmesh 등의 활용과 수동 조정을 고려해야 합니다.