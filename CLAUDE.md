# Dark Rust - 프로젝트 체크포인트

## 🔴 중요: 세션 종료 시 체크포인트 생성
**모든 Claude 세션 종료 전에 반드시 체크포인트를 생성하세요!**
```
"현재까지의 작업을 checkpoint로 저장해줘"
```
이렇게 하면 다음 세션에서 이전 컨텍스트를 완벽하게 복구할 수 있습니다.

## 프로젝트 개요
**Dark Rust**: Rust + Bevy 엔진으로 개발하는 3D 소울라이크 액션 게임

## 현재 구현 상태 (Phase 1 MVP 완료)

### ✅ 완료된 핵심 시스템

1. **기본 프로젝트 구조**
   - Bevy 0.15 + Rapier3D 물리엔진 설정
   - ECS 아키텍처 기반 모듈화 구조
   - 개발/릴리즈 빌드 최적화 설정

2. **플레이어 시스템**
   - WASD 이동 및 마우스 시점 변경
   - 체력(HP) 100, 스테미나 100 시스템
   - 캡슐 모양 물리 바디 (충돌 처리)

3. **전투 시스템**
   - 마우스 좌클릭 기본 공격
   - 무기 시스템 (데미지, 쿨다운)
   - 히트박스 시스템 (공격 범위 감지)
   - 공격 이펙트 표시

4. **적 AI 시스템**
   - 기본 적 엔티티 (초록색 캡슐)
   - 플레이어 추적 AI (거리 기반)
   - 적 공격 시스템
   - 체력 50 설정

5. **카메라 시스템**
   - 3인칭 추적 카메라
   - 플레이어 뒤 5유닛 거리 유지

6. **UI 시스템**
   - 체력바 (좌상단)
   - 스테미나바 (체력바 아래)
   - 소울 카운터 (우상단)
   - 기본 HUD 레이아웃

7. **게임 상태 관리**
   - GameState: Playing/Paused/Death
   - 상태별 시스템 분리
   - 일시정지/사망 화면 기본 구조

### 📁 파일 구조
```
src/
├── main.rs                    # 게임 진입점, 시스템 등록
├── components/               # ECS 컴포넌트
│   ├── combat.rs            # 무기, 공격 상태
│   ├── enemy.rs             # 적 AI, 상태
│   ├── player.rs            # 플레이어 컴포넌트
│   ├── stats.rs             # 체력, 스테미나, 소울
│   └── ui.rs                # UI 관련 컴포넌트
├── systems/                 # ECS 시스템
│   ├── camera.rs            # 카메라 추적
│   ├── combat.rs            # 전투 로직
│   ├── enemy_ai.rs          # 적 AI 로직
│   ├── input.rs             # 입력 처리
│   ├── player_movement.rs   # 플레이어 이동
│   └── ui.rs                # UI 업데이트
├── resources/               # 글로벌 리소스
│   └── input.rs             # 입력 매핑
└── states/                  # 게임 상태
    └── mod.rs               # 상태 정의
```

### 🎮 현재 게임플레이 기능
- **이동**: WASD 키로 플레이어 이동
- **시점**: 마우스로 카메라 회전  
- **공격**: 마우스 좌클릭으로 공격
- **전투**: 적 감지 시 자동 추적 및 교전
- **UI**: 실시간 체력/스테미나/소울 표시

### 🔧 기술 스택
- **엔진**: Bevy 0.15
- **물리**: bevy_rapier3d 0.28  
- **언어**: Rust 2021 edition
- **아키텍처**: ECS (Entity-Component-System)

## 📋 다음 구현 단계 (Phase 2)

### 🚀 우선순위 높음
1. **회피 시스템**
   - 스페이스바 롤링 회피
   - 무적 프레임 구현
   - 스테미나 소모

2. **사망/부활 시스템**
   - 체력 0시 사망 상태 전환
   - 소울 드롭 (사망 위치에 남김)
   - 체크포인트에서 부활

3. **체크포인트 시스템**
   - 횃불 형태 체크포인트
   - 상호작용으로 활성화
   - 부활 지점 설정

### 🎯 우선순위 중간
4. **강공격 시스템**
   - 마우스 우클릭 차지 공격
   - 더 높은 데미지, 긴 쿨다운

5. **방어 시스템**  
   - Shift키 방패 방어
   - 데미지 감소, 스테미나 소모

6. **소울 시스템**
   - 적 처치 시 소울 획득
   - 사망 시 소울 드롭
   - 소울 회수 메커니즘

### 🏗️ Phase 3 계획
- 보스 AI (패턴 기반 공격)
- 레벨 디자인 (던전, 함정)
- 사운드 시스템
- 애니메이션 시스템

## 💡 개발 팁

### 빌드 명령어
```bash
# 개발용 실행
cargo run

# 릴리즈 빌드
cargo build --release
```

### 디버깅
- Rapier 물리 디버그 렌더링 활성화됨
- F12로 물리 콜라이더 시각화 가능

### 성능 최적화
- dev 프로파일: opt-level = 1 (컴파일 속도 vs 성능 균형)
- release 프로파일: LTO, panic=abort 설정

## 🎮 소울라이크 핵심 메커니즘 체크리스트

- ✅ 도전적인 전투 (기본 공격/적 AI)
- ✅ 체력/스테미나 관리
- ⏳ 사망시 리스크 (소울 드롭)
- ⏳ 체크포인트 시스템
- ⏳ 회피 메커니즘
- ❌ 방어 시스템
- ❌ 보스 전투
- ❌ 레벨 탐험 요소

---
**체크포인트 작성일**: 2025-07-26  
**마지막 빌드 상태**: 정상 동작  
**다음 목표**: 회피 시스템 구현